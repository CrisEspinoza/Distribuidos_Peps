config:

  target: 'http://35.226.46.146:1818'
  phases:
    # Se realizan las peticiones.
    - duration: 30
      arrivalRate: 500

    # Disminuyen las peticiones durante 30 segundos.
    - duration: 30
      arrivalRate: 10
      rampTo: 250
  
  plugins:
    statsd:
      host: "localhost"
      port: 8125
      prefix: "artillery"

  payload:
    path: "../data.csv"
    fields:
      - "name"
      - "rut"
      - "address"
      - "reason"

scenarios:

  - flow:  
    - post:
        url: "/form"
        json:
          rut: "{{ rut }}"
          name: "{{ name }}"
          address: "{{ address }}"
          reason: "{{ reason }}"
    - think: 3
    - get:
        url: "/form"